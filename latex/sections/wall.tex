\section{Linear wall}
\subsection{Properties}
\begin{table}[H]
\begin{tabularx}{1.0\linewidth}{ R R }
\hline
\hline
$ \mathbf{p}_{0} $ & Start point \\
$ \mathbf{p}_{1} $ & End point \\
\hline
\hline
$ h_{iw} = d_{iw} - r_{i} $ & \\
$ l_{w} = \left\|\mathbf{p}_{1} - \mathbf{p}_{0}\right\| $ & Length \\
$ \hat{\mathbf{t}}_{w} = \left(\mathbf{p}_{1} - \mathbf{p}_{0}\right) / l_{w} $ & \\
$ \hat{\mathbf{n}}_{w} = R(90^{\circ}) \cdot \hat{\mathbf{t}}_{w} $ & \\
\hline
\hline
\end{tabularx}
\end{table}

\subsection{Absolute distance}
Solving linear system of equations determining the position of the agent $ \mathbf{x}_{i} $ in relation to wall
\begin{align}
\begin{cases}
\mathbf{p}_{0} + l_{n_0} \hat{\mathbf{n}}_{w} = \mathbf{x}_{i} + l_{t_0} \hat{\mathbf{t}}_{w} \\
\mathbf{p}_{1} + l_{n_1} \hat{\mathbf{n}}_{w} = \mathbf{x}_{i} + l_{t_1} \hat{\mathbf{t}}_{w}
\end{cases} 
\\
\begin{cases}
l_{n_0} \hat{\mathbf{n}}_{w} - l_{t_0} \hat{\mathbf{t}}_{w} = \mathbf{x}_{i} - \mathbf{p}_{0} =  \mathbf{q}_{0} \\
l_{n_1} \hat{\mathbf{n}}_{w} - l_{t_1} \hat{\mathbf{t}}_{w} = \mathbf{x}_{i} - \mathbf{p}_{1} = \mathbf{q}_{1}
\end{cases}
\end{align}

In matrix form
\begin{align}
\begin{bmatrix} l_{n_0} & l_{n_1} \\ l_{t_0} & l_{t_1} \end{bmatrix} &= \mathbf{A}^{-1} \begin{bmatrix} \mathbf{q}_{0} & \mathbf{q}_{1} \end{bmatrix}
\end{align}

\begin{align}
\mathbf{A} 
&= \begin{bmatrix} \hat{\mathbf{n}}_{w} & -\hat{\mathbf{t}}_{w} \end{bmatrix} 
= \left[\begin{matrix}- t_{1} & - t_{0}\\t_{0} & - t_{1}\end{matrix}\right] \\
\mathbf{A}^{-1} 
&= \frac{1}{t_{0}^{2} + t_{1}^{2}} \left[\begin{matrix}- t_{1} & t_{0}\\- t_{0} & - t_{1}\end{matrix}\right]
= \left[\begin{matrix}- t_{1} & t_{0}\\- t_{0} & - t_{1}\end{matrix}\right] \\
&= \begin{bmatrix} \hat{\mathbf{n}}_{w} \\ -\hat{\mathbf{t}}_{w} \end{bmatrix} = \mathbf{A}^{T}
\end{align}

Conditions
\begin{align}
l_{n} &= l_ {n_0} \vee l_{n_1} = \hat{\mathbf{n}}_{w} \cdot \mathbf{q}_{0} \vee \hat{\mathbf{n}}_{w} \cdot \mathbf{q}_{1} \\
l_{t} &= l_{t_1} + l_{t_0} = - \hat{\mathbf{t}}_{w} \cdot \mathbf{q}_{1} - \hat{\mathbf{t}}_{w} \cdot \mathbf{q}_{0}
\end{align}
Distance between agent and linear wall
\begin{align}
d_{iw} &=
\begin{cases}
\left\|\mathbf{q}_{0}\right\| & l_{t} > l_{w} \\
\left|l_{n}\right| & \text{otherwise} \\
\left\|\mathbf{q}_{1}\right\| & l_{t} < -l_{w}
\end{cases}
\end{align}
Normal vector away from the wall
\begin{align}
\hat{\mathbf{n}}_{iw} &=
\begin{cases}
\hat{\mathbf{q}}_{0} & l_{t} > l_{w} \\
\operatorname{sign}(l_{n})\hat{\mathbf{n}}_{w} & \text{otherwise} \\
\hat{\mathbf{q}}_{1} & l_{t} < -l_{w}
\end{cases}
\end{align}

\subsection{Velocity relative distance}

\begin{table}[H]
\centering
\begin{tabularx}{1.0\linewidth}{ R R }
\hline
\hline
$ \tilde{\mathbf{x}} = \mathbf{x}_{iw} $ & Relative position \\
$ \tilde{\mathbf{v}} = \mathbf{v}_{iw} = \mathbf{v}_{i} $ & Relative velocity \\
$ \tilde{r} = r_{iw} $ & Total radius \\
$ d = \left\|\tilde{\mathbf{x}}\right\| $ & Distance\\
$ h = d - \tilde{r} $ & Relative distance \\
%$ \hat{\mathbf{n}} = \tilde{\mathbf{x}} / d $ & Normal vector \\
%$ \hat{\mathbf{t}} = R(-90^{\circ}) \cdot \hat{\mathbf{n}} $ & Tangent vector \\
\hline
\hline
\end{tabularx}
\end{table}


\begin{align}
\mathbf{q}_{0} &= \mathbf{p}_{0} - \mathbf{x} \\
\mathbf{q}_{1} &= \mathbf{p}_{1} - \mathbf{x} \\
\hat{\mathbf{n}}_{iw} &= - \operatorname{sign}(\hat{\mathbf{n}}_{w} \cdot \mathbf{q}_{0}) \hat{\mathbf{n}}_{w}
\end{align}


\begin{align}
\boldsymbol{\alpha} &= [\atan(\mathbf{q}_{0}), \atan(\mathbf{q}_{1}), \atan(\hat{\mathbf{n}}_{iw})] \\
\varphi &= \atan(\mathbf{v}) \\
\boldsymbol{\alpha}_{2} &= \boldsymbol{\alpha} - \varphi \mod{2 \pi}
\end{align}

\begin{align}
i = (\arg\min(\boldsymbol{\alpha}_{2}), \arg\max(\boldsymbol{\alpha}_{2}))
\end{align}

Intersection
\begin{align}
\mathbf{x} + a \mathbf{v} &= \mathbf{p}_0 + b (\mathbf{p}_1 - \mathbf{p}_0),\quad a \in \mathbb{R}^{+}, \quad b \in [0, 1]
\\
[\mathbf{v}, -\mathbf{p}] \cdot [a,  b] &= \mathbf{q}_0, \quad  \mathbf{p} = \mathbf{p}_1 - \mathbf{p}_0
\end{align}

