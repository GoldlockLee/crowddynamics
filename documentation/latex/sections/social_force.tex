\section{Crowd dynamics}
\subsection{Social force model}
Total force on the agent $ i $
\begin{align}
\mathbf{f}_{i}(t) = \mathbf{f}_{i}^{adj} + \sum_{j\neq i}^{} \left(\mathbf{f}_{ij}^{soc} + \mathbf{f}_{ij}^{c}\right) + \sum_{w}^{} \left(\mathbf{f}_{iw}^{soc} + \mathbf{f}_{iw}^{c}\right) + \boldsymbol{\xi}_{i}
\end{align}


\subsection{Adjusting Force}
Force adjusting agent's movement towards desired in some characteristic time \begin{align}
\mathbf{f}_{i}^{adj} &= \frac{m_{i}}{\tau_{i}^{adj}} (v_{i}^{0} \cdot \hat{\mathbf{e}}_{i} - \mathbf{v}_{i}) 
\end{align}

Herding behavior
\begin{align}
\mathbf{e}_{i} &= (1 - p_{i}) \hat{\mathbf{e}}_{i}^{0} + p_{i} \left\langle \hat{\mathbf{e}}_{j}^{0} \right\rangle_{i}
\end{align}


\subsection{Agent-Agent}
Psychological tendency to keep a certain distance to other agents
\begin{align}
\mathbf{f}_{ij}^{soc} &= \mathbf{f}_{ij}^{pow}, \quad  d_{ij} \leq \text{sight} 
\end{align}

Physical contact forces with other agents 
\begin{align}
\mathbf{f}_{ij}^{c} &= h_{ij} \cdot \left(\mu \cdot \hat{\mathbf{n}}_{ij} - \kappa \cdot \left(\mathbf{v}_{ji} \cdot \hat{\mathbf{t}}_{ij}\right) \hat{\mathbf{t}}_{ij}\right), \quad h_{ij} > 0
\end{align}


\subsection{Agent-Wall}
Psychological tendency to keep a certain distance to walls
\begin{align}
\mathbf{f}_{iw}^{soc} &= A_{i} \exp\left(\frac{h_{iw}}{B_{i}}\right) \hat{\mathbf{n}}_{iw}, \quad  d_{iw} \leq \text{sight}
\end{align} 

Physical contact forces with walls
\begin{align}
\mathbf{f}_{iw}^{c} &= h_{iw} \cdot \left(\mu \cdot \hat{\mathbf{n}}_{iw} - \kappa \cdot (\mathbf{v}_{i} \cdot \hat{\mathbf{t}}_{iw}) \hat{\mathbf{t}}_{iw}\right), \quad h_{iw} > 0
\end{align}


\subsection{Random Fluctuation}
Uniformly distributed random fluctuation force
\begin{align}
\boldsymbol{\xi}_{i} &= \boldsymbol{\mathcal{U}}(-1, 1).
\end{align}



\subsection{Universal power law governing pedestrian interactions}
Interaction force between agents
\begin{align}
\mathbf{f}_{ij}^{pow} &= -\nabla_{\mathbf{x}_{ij}} E(\tau)  \\
&= -\nabla_{\mathbf{x}_{ij}} \left(\frac{k}{\tau^{2}} \exp \left( -\frac{\tau}{\tau_{0}} \right) \right) \\
%\\
%&= - \left[\frac{k}{\left\|\mathbf{v}_{ij}\right\|^{2} \tau^{2}} \exp \left( -\frac{\tau}{\tau_{0}} \right) \left(\frac{2}{\tau} + \frac{1}{\tau_{0}}\right) \right] 
%\\
%&\left[ \mathbf{v}_{ij} - \frac{\left\|\mathbf{v}_{ij}\right\|^{2} \mathbf{x}_{ij} - \left(\mathbf{x}_{ij}\cdot\mathbf{v}_{ij}\right) \mathbf{v}_{ij} }{\sqrt{\left(\mathbf{x}_{ij}\cdot\mathbf{v}_{ij}\right)^{2} - \left\|\mathbf{v}_{ij}\right\|^{2} \left( \left\|\mathbf{x}_{ij}\right\|^{2} - r_{ij}^{2} \right) }} \right]
&= - \left(\frac{k}{a \tau^{2}}\right) 
\left(\frac{2}{\tau} + \frac{1}{\tau_{0}}\right) 
\exp\left (-\frac{\tau}{\tau_{0}}\right )
\left(\mathbf{v}_{ij} -\frac{a \mathbf{x}_{ij} + b \mathbf{v}_{ij}}{d} \right),
\end{align}
where
\begin{align}
a &= \mathbf{v}_{ij} \cdot \mathbf{v}_{ij} \\
b &= -\mathbf{x}_{ij} \cdot \mathbf{v}_{ij} \\
c &= \mathbf{x}_{ij} \cdot \mathbf{x}_{ij} - r_{ij}^{2} \\
d &= \sqrt{b^{2} - a c} \\
\tau &= \frac{b - d}{a} > 0.
\end{align}
