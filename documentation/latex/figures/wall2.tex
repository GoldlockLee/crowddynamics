% Start - End - Mid - nodes
% -----------------------------
\coordinate[] (p0)  at (-4, 0);  % Start
\coordinate[] (p1)  at ( 4, 0);  % End
\coordinate[] (off) at ( 0, 3);

% Vertical Lines
% -----------------------------
%\draw[dashed, gray] ($ (p0) + (off) $) -- ($ (p1) + (off) $);
%\draw[dashed, gray] ($ (p0) - (off) $) -- ($ (p1) - (off) $);

% Arcs
% -----------------------------
%\draw[dashed, brown] ($ (p0) + (off) $) arc (90:270:3);
%\draw[dashed, brown] ($ (p1) - (off) $) arc (-90:90:3);

% Horizontal Line - Separator
% -----------------------------
\coordinate[] (sep00) at ($ (p0) - (off) - (0, 1) $);
\coordinate[] (sep01) at ($ (p0) + (off) + (0, 1) $);
\draw[dashed, red, ->] (sep00) -- (sep01) ;

\coordinate[] (sep10) at ($ (p1) - (off) - (0, 1) $);
\coordinate[] (sep11) at ($ (p1) + (off) + (0, 1) $);
\draw[dashed, red, ->] (sep10) -- (sep11) ;

% Linear wall
% -----------------------------
\node[point] (start) at (p0) {$ \mathbf{p}_{0} $};
\node[point] (end)   at (p1) {$ \mathbf{p}_{1} $};
\coordinate[] (mid) at ($ (p0) + (p1) $);  % / 2
\path[] (start)
        edge[<->] node[below=4pt, midway]{Linear Wall} 
        (end);

% Normal Vector
% -----------------------------
\path[] (mid)
        edge[->, thick, opacity=0.5] node[left, midway]{$ \hat{\mathbf{n}}_{w} $} 
        ($ (mid) + (0, 1) $);

% Tangent Vector
% -----------------------------
\path[] ($ (mid) + (0, 0) $) 
        edge[->, thick, opacity=0.5] node[above, midway]{$ \hat{\mathbf{t}}_{w} $} 
        ($ (mid) + (1, 0) $);

% -----------------------------
% Pedestrians
% -----------------------------

% Above
% -----------------------------
\def \radius {3};
\node[point] (x1) at ($ (start) + (2, \radius) $) {$ \mathbf{x}_{i} $};
\path[] (start) edge[->, darkgray] node[right]{} (x1);
\path[] (end)   edge[->, darkgray] node[right]{} (x1);

\draw[dashed, ->] (x1) -- ($ (x1) + (0, 1) $);
\draw[] (x1) circle (1);

% Left
% -----------------------------
\def \angle {45};
\node[point] (x2) at ($ (start) + ({\radius * cos(90+\angle)}, {\radius * sin(90+\angle)}) $) 
             {$ \mathbf{x}_{i} $};
\path[] (start) edge[<->, gray] node[above]{} (x2);
\path[] (end)   edge[<->, gray] node[above]{} (x2);

\draw[dashed, ->] (x2) -- ($ (x2) + (0, 1) $);
\draw[] (x2) circle (1);

% Below
% -----------------------------
\node[point] (x3) at (0, -3) {$ \mathbf{x}_{i} $};

\path[] (start) edge[->] node[below]{} (x3);
\path[] (end)   edge[->] node[below]{ } (x3);

\draw[dashed, ->] (x3) -- ($ (x3) + (0, -1) $);
\draw[] (x3) circle (1);


% On line
% -----------------------------
%\node[point] (x4) at (7, 0) {$ \mathbf{x}_{i} $};
%
%\path[] (start) edge[->] node[below]{} (x4);
%\path[] (end)   edge[->] node[below]{ } (x4);
%
%%\draw[dashed, ->] (x4) -- ($ (x4) + (0, -1) $);
%\draw[] (x4) circle (1);