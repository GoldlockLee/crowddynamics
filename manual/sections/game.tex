\section{Spatial game}
\subsection{Game matrix}
\begin{tabularx}{1.0\linewidth}{ l R }
$ T_{i} = \lambda_{i} / \beta $ &  Estimated evacuation time \\
$ \lambda_{i} $ & Number of other agents closer to the exit \\
$ \beta $ & Capacity of the exit \\
$ T_{ij} = \left(T_{i} + T_{j}\right) / 2 $ & Average evacuation time \\
$ T_{ASET} $ & Available safe egress time \\
$ T_{0} $ & Time difference between $ T_{ASET} $ and $ T_{i} $ before agents start playing the game \\
$ C > 0 $ & Cost of conflict \\
\end{tabularx}


Cost function
\begin{align}
u(T_{i}, T_{ASET}), \quad u^{\prime}(T_{i}) \geq 0, \quad u^{\prime\prime}(T_{i}) \geq 0
\end{align}

Increase/decrease in cost
\begin{align}
\Delta u(T_{ij}) = u(T_{ij}) - u(T_{ij} - \Delta T) \approxeq u^{\prime}(T_{ij}) \Delta T
\end{align}


\begin{tabularx}{1.0\linewidth}{ c | C | C }
& Impatient & Patient \\
\hline
&& \\
Impatient & $ C, C $ & $ -\Delta u(T_{ij}), \Delta u(T_{ij}) $ \\
&& \\
\hline
&& \\
Patient & $ \Delta u(T_{ij}), -\Delta u(T_{ij}) $ & $ 0, 0 $ \\
&& \\
\end{tabularx}

\vspace{1.0cm}

\begin{tabularx}{1.0\linewidth}{ c | C | C }
& Impatient & Patient \\
\hline
&& \\
Impatient & $ \frac{C}{\Delta u(T_{ij})}, \frac{C}{\Delta u(T_{ij})} $ & $ -1, 1 $ \\
&& \\
\hline
&& \\
Patient & $ 1, -1 $ & $ 0, 0 $ \\
&& \\
\end{tabularx}

\vspace{1.0cm}

\begin{enumerate}[label=\roman{enumi})]
\item Prisoner's dilemma (PD)
\begin{align}
0 < \frac{C}{\Delta u(T_{ij})} \leq 1
\end{align}

\item Hawk-dove (HD)
\begin{align}
\frac{C}{\Delta u(T_{ij})} > 1
\end{align}

\end{enumerate}

Assumptions
\begin{enumerate}
\item Game is not played
\begin{align}
T_{ij} \leq T_{ASET} - T_{0}
\end{align}

\item Cost function starts to increase quadratically
\begin{align}
T_{ij} > T_{ASET} - T_{0}
\end{align}

\item Game turns into prisoner's dilemma
\begin{align}
u^{\prime}(T_{ASET}) = C, \quad T_{ij} \geq T_{ASET}
\end{align}

\end{enumerate}

Cost function that meets the assumptions
\begin{align}
u(T_{ij}) = \begin{cases}
0 & T_{ij} \leq T_{ASET} - T_{0} \\
\frac{C}{2 T_{0}} \left(T_{ij} - T_{ASET} + T_{0}\right)^{2} & T_{ij} > T_{ASET} - T_{0} \\
\end{cases}
\end{align}
Derivative
\begin{align}
u^{\prime}(T_{ij}) = \begin{cases}
0 & T_{ij} \leq T_{ASET} - T_{0} \\
\frac{C}{T_{0}} \left(T_{ij} - T_{ASET} + T_{0}\right) & T_{ij} > T_{ASET} - T_{0} \\
\end{cases}
\end{align}

Loss/gain of overtaking
\begin{align}
\Delta u(T_{ij}) \approxeq u^{\prime}(T_{ij}) \Delta T = \frac{C}{T_{0}} \left(T_{i} - T_{ASET} + T_{0}\right) \Delta T
\end{align}

Value parameter of the game matrix
\begin{align}
\frac{C}{\Delta u(T_{ij})} \approxeq \frac{T_{0}}{T_{ij} - T_{ASET} + T_{0}}
\end{align}

\subsection{Settings and best-response dynamics}
\begin{table}[H]
\begin{tabularx}{1.0\linewidth}{ r r r R }
 & Unit & Value &  \\
\hline
\hline
 & & 4 & von Neumann neighborhood \\
 & & 8 & Moore neighborhood \\
$ r_{n} $ & $ \mathrm{m} $ & 0.40 & Distance to agent that is considered as neighbor \\
$ v_{i} $ & & & Loss defined by game matrix \\
$ S $ &&& Set of strategies $ \{\mathrm{Patient}, \mathrm{Impatient}\} $ \\
$ s $ &&& Strategy $ \in \{\mathrm{Patient}, \mathrm{Impatient}\} $ \\
\end{tabularx}
\end{table}

The best-response strategy
\begin{align}
s_{i}^{(t)} = \arg\min_{s_{i}^{\prime}\in S} \sum_{j\in N_{i}} v_{i} \left(s_{i}^{\prime}, s_{j}^{(t-1)} ; T_{ij} \right)
\end{align}

$ s_{j}^{(t-1)} $ strategy neighbor played on period $ t-1 $

Updating strategy using poisson process.

