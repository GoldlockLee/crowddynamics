\tikzset{
    point/.style = {draw, circle, fill=white, inner sep=0.5pt}
}

% Start - End - Mid - nodes
% -----------------------------
\coordinate[] (p0)  at (-4, 0);  % Start
\coordinate[] (p1)  at ( 4, 0);  % End
\coordinate[] (off) at ( 0, 3);

% Vertical Lines
% -----------------------------
%\draw[dashed, gray] ($ (p0) + (off) $) -- ($ (p1) + (off) $);
%\draw[dashed, gray] ($ (p0) - (off) $) -- ($ (p1) - (off) $);

% Arcs
% -----------------------------
%\draw[dashed, brown] ($ (p0) + (off) $) arc (90:270:3);
%\draw[dashed, brown] ($ (p1) - (off) $) arc (-90:90:3);

% Horizontal Line - Separator
% -----------------------------
%\coordinate[] (sep00) at ($ (p0) - (off) - (0, 1) $);
%\coordinate[] (sep01) at ($ (p0) + (off) + (0, 1) $);
%\draw[dashed, red, ->] (sep00) -- (sep01) ;
%
%\coordinate[] (sep10) at ($ (p1) - (off) - (0, 1) $);
%\coordinate[] (sep11) at ($ (p1) + (off) + (0, 1) $);
%\draw[dashed, red, ->] (sep10) -- (sep11) ;

% Linear wall
% -----------------------------
\node[point] (start) at (p0) {$ \mathbf{p}_{0} $};
\node[point] (end)   at (p1) {$ \mathbf{p}_{1} $};
\coordinate[] (mid) at ($ (p0) + (p1) $);  % / 2
\path[] (start)
        edge[<->] node[below=4pt, midway]{Linear Wall} 
        (end);

% Normal Vector
% -----------------------------
\path[] (mid)
        edge[->, thick, opacity=0.5] node[left, midway]{$ \hat{\mathbf{n}}_{w} $} 
        ($ (mid) + (0, 1) $);

% Tangent Vector
% -----------------------------
\path[] ($ (mid) + (0, 0) $) 
        edge[->, thick, opacity=0.5] node[above, midway]{$ \hat{\mathbf{t}}_{w} $} 
        ($ (mid) + (1, 0) $);

% -----------------------------
% Pedestrians
% -----------------------------

\def \radius {1};

% Above
% -----------------------------
%\coordinate[] (y1) at ($ (start) + (2, 3) $);
%\filldraw[opacity=0.2] (y1) -- ($ (y1) + (1, 0) $) arc (0:330:1) -- cycle;

\node[point] (x1) at ($ (start) + (2, 3) $) {$ \mathbf{x}_{i} $};
\path[] (x1) edge[darkgray, dashed, ->] node[above]{$ \mathbf{q}_{0} $} (start);
\path[] (x1) edge[darkgray, dashed, ->] node[above]{$ \mathbf{q}_{1} $} (end);
\path[] (x1) edge[darkgray, dashed, ->] node[right]{$ \mathbf{n}_{iw} $} ($ (x1) + (0, 1) $);
\draw[] (x1) circle (\radius);

\path[] (x1) 
        edge[thick, ->] node[above]{$ \mathbf{v}_{0} $} 
        ($ (x1) + (1, 0) $);

\path[] (x1) 
        edge[thick, ->] node[left]{$ \mathbf{v}_{1} $} 
        ($ (x1) + ({cos(125)}, {sin(125)}) $);

\path[] (x1) 
        edge[thick, ->] 
        node[right]{$ \mathbf{v}_{2} $} (-1, 1);

% Left
% -----------------------------
\def \angle {45};
\node[point] (x2) at ($ (start) + (-2, 3) $) {$ \mathbf{x}_{i} $};
\path[] (x2) edge[darkgray, dashed, ->] node[]{} (start);
\path[] (x2) edge[darkgray, dashed, ->] node[]{} (end);
\path[] (x2) edge[darkgray, dashed, ->] node[]{} ($ (x2) + (0, 1) $);
\draw[] (x2) circle (\radius);

% Below
% -----------------------------
\node[point] (x3) at (0, -3) {$ \mathbf{x}_{i} $};
\path[] (x3) edge[darkgray, dashed, ->] node[]{} (start);
\path[] (x3) edge[darkgray, dashed, ->] node[]{} (end);
\path[] (x3) edge[darkgray, dashed, ->] node[]{} ($ (x3) + (0, -1) $);
\draw[] (x3) circle (\radius);

% On line
% -----------------------------
\node[point] (x4) at (-6, 0) {$ \mathbf{x}_{i} $};
\path[] (x4) edge[darkgray, dashed, ->] node[]{} (start);
%\path[] (x4) edge[darkgray, dashed, ->] node[]{} (end);
%\path[] (x4) edge[darkgray, dashed, ->] node[]{} ($ (x4) + (0, -1) $);
\draw[] (x4) circle (\radius);
