\section{Linear wall}
\subsection{Properties}
\begin{table}[H]
\begin{tabularx}{1.0\linewidth}{ R R }
\hline
\hline
$ \mathbf{p}_{0} $ & Start point \\
$ \mathbf{p}_{1} $ & End point \\
\hline
\hline
$ h_{iw} = r_{i} - d_{iw} $ & \\
$ l_{w} = \left\|\mathbf{p}_{1} - \mathbf{p}_{0}\right\| $ & Length \\
$ \hat{\mathbf{t}}_{w} = \left(\mathbf{p}_{1} - \mathbf{p}_{0}\right) / l_{w} $ & \\
$ \hat{\mathbf{n}}_{w} = R(90^{\circ}) \cdot \hat{\mathbf{t}}_{w} $ & \\
\hline
\hline
\end{tabularx}
\end{table}

\subsection{Absolute distance}
Solving linear system of equations determining the position of the agent $ \mathbf{x}_{i} $ in relation to wall
\begin{align}
\begin{cases}
\mathbf{p}_{0} + l_{n_0} \hat{\mathbf{n}}_{w} = \mathbf{x}_{i} + l_{t_0} \hat{\mathbf{t}}_{w} \\
\mathbf{p}_{1} + l_{n_1} \hat{\mathbf{n}}_{w} = \mathbf{x}_{i} + l_{t_1} \hat{\mathbf{t}}_{w}
\end{cases} 
\\
\begin{cases}
l_{n_0} \hat{\mathbf{n}}_{w} - l_{t_0} \hat{\mathbf{t}}_{w} = \mathbf{x}_{i} - \mathbf{p}_{0} =  \mathbf{q}_{0} \\
l_{n_1} \hat{\mathbf{n}}_{w} - l_{t_1} \hat{\mathbf{t}}_{w} = \mathbf{x}_{i} - \mathbf{p}_{1} = \mathbf{q}_{1}
\end{cases}
\end{align}

In matrix form
\begin{align}
\begin{bmatrix} l_{n_0} & l_{n_1} \\ l_{t_0} & l_{t_1} \end{bmatrix} &= \mathbf{A}^{-1} \begin{bmatrix} \mathbf{q}_{0} & \mathbf{q}_{1} \end{bmatrix}
\end{align}

\begin{align}
\mathbf{A} 
&= \begin{bmatrix} \hat{\mathbf{n}}_{w} & -\hat{\mathbf{t}}_{w} \end{bmatrix} 
= \left[\begin{matrix}- t_{1} & - t_{0}\\t_{0} & - t_{1}\end{matrix}\right] \\
\mathbf{A}^{-1} 
&= \frac{1}{t_{0}^{2} + t_{1}^{2}} \left[\begin{matrix}- t_{1} & t_{0}\\- t_{0} & - t_{1}\end{matrix}\right]
= \left[\begin{matrix}- t_{1} & t_{0}\\- t_{0} & - t_{1}\end{matrix}\right] \\
&= \begin{bmatrix} \hat{\mathbf{n}}_{w} \\ -\hat{\mathbf{t}}_{w} \end{bmatrix} = \mathbf{A}^{T}
\end{align}

Conditions
\begin{align}
l_{n} &= l_ {n_0} \vee l_{n_1} = \hat{\mathbf{n}}_{w} \cdot \mathbf{q}_{0} \vee \hat{\mathbf{n}}_{w} \cdot \mathbf{q}_{1} \\
l_{t} &= l_{t_1} + l_{t_0} = - \hat{\mathbf{t}}_{w} \cdot \mathbf{q}_{1} - \hat{\mathbf{t}}_{w} \cdot \mathbf{q}_{0}
\end{align}
Distance between agent and linear wall
\begin{align}
d_{iw} &=
\begin{cases}
\left\|\mathbf{q}_{0}\right\| & l_{t} > l_{w} \\
\left|l_{n}\right| & \text{otherwise} \\
\left\|\mathbf{q}_{1}\right\| & l_{t} < -l_{w}
\end{cases}
\end{align}
Normal vector away from the wall
\begin{align}
\hat{\mathbf{n}}_{iw} &=
\begin{cases}
\hat{\mathbf{q}}_{0} & l_{t} > l_{w} \\
\operatorname{sign}(l_{n})\hat{\mathbf{n}}_{w} & \text{otherwise} \\
\hat{\mathbf{q}}_{1} & l_{t} < -l_{w}
\end{cases}
\end{align}

\subsection{Velocity relative distance}

\begin{table}[H]
\centering
\begin{tabular}{ll}
$ \tilde{\mathbf{x}} = \mathbf{x}_{iw} $ & Relative position \\
$ \tilde{\mathbf{v}} = \mathbf{v}_{iw} = \mathbf{v}_{i} $ & Relative velocity \\
$ \tilde{r} = r_{iw} $ & Total radius \\
$ d = \left\|\tilde{\mathbf{x}}\right\| $ & Distance\\
$ h = \tilde{r} - d $ & Relative distance \\
%$ \hat{\mathbf{n}} = \tilde{\mathbf{x}} / d $ & Normal vector \\
%$ \hat{\mathbf{t}} = R(-90^{\circ}) \cdot \hat{\mathbf{n}} $ & Tangent vector \\
\end{tabular}
\end{table}

Dividing vectors
\begin{align}
\mathbf{q}_{0} &= \mathbf{p}_{0} - \mathbf{x} \\
\mathbf{q}_{1} &= \mathbf{p}_{1} - \mathbf{x} \\
\hat{\mathbf{n}}_{iw} &= - \operatorname{sign}(\hat{\mathbf{n}}_{w} \cdot \mathbf{q}_{0}) \hat{\mathbf{n}}_{w}
\end{align}

Angle of 2D vector is found using \url{https://en.wikipedia.org/wiki/Atan2} where angle is between $ [-\pi, \pi] $
\newcommand{\atan}{\ensuremath{\operatorname{angle}}}
\begin{align}
\boldsymbol{\alpha} = [\atan(\mathbf{q}_{0}), \atan(\mathbf{q}_{1}), \atan(\hat{\mathbf{n}}_{iw})]
\end{align}

\begin{align}
\varphi = \atan(\mathbf{v})
\end{align}

